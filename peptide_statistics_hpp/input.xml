<?xml version="1.0" encoding="ISO-8859-1" ?>
<interface id="peptide_statistics_hpp" version="0.1.0">
	<workflow-id>PEPTIDE_STATISTICS_HPP</workflow-id>
	<workflow-label>HPPInspector</workflow-label>
	<parameters>
        <parameter name="desc" label="Description">
            <validator type="length" maximum="1000"/>
        </parameter>
        <parameter name="email" label="Email">
            <validator type="email"/>
        </parameter>
        <!-- Search file parameters -->
		<parameter name="fastadb" label="Proteome DB">
			<fileGenerator type="upload" purpose="fasta" target="fastadb"/>
		</parameter>

		<parameter name="mztab" label="Search mzTab Files">
			<fileGenerator type="upload" purpose="mztab" target="mztab"/>
		</parameter>

		<parameter name="synthetics" label="Synthetics">
			<fileGenerator type="upload" purpose="synthetics" target="synthetics"/>
		</parameter>

		<parameter name="spec_on_server" label="Spectrum Files (if not public)">
			<fileGenerator type="upload" purpose="spec_on_server" target="spec_on_server"/>
		</parameter>

		<parameter name="peak_tolerance" label="Peak Tolerance (Da) for Cosine to Synthetics">
			<default value="0.05"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="cosine_threshold" label="Cosine Threshold (Set to 0 to skip cosine calculations)">
			<default value="0.5"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="explained_intensity_threshold" label="Explained Intensity Threshold">
			<default value="0.4"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="annotated_ions_threshold" label="Annotated Ions Threshold">
			<default value="6"/>
			<validator type="integer" minimum="0"/>
		</parameter>

		<parameter name="precursor_fdr" label="Precursor FDR">
			<default value="0.01"/>
			<validator type="float" minimum="0"/>
		</parameter>
		<parameter name="picked_protein_fdr" label="Picked Protein FDR">
			<default value="0.01"/>
			<validator type="float" minimum="0"/>
		</parameter>
		<parameter name="hpp_protein_fdr" label="HPP Protein FDR">
			<default value="0.01"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="picked_protein_fdr_comparison" label="Picked Protein Comparison FDR">
			<default value="0.01"/>
			<validator type="float" minimum="0"/>
		</parameter>
		<parameter name="hpp_protein_fdr_comparison" label="HPP Protein Comparison FDR">
			<default value="0.01"/>
			<validator type="float" minimum="0"/>
		</parameter>


		<parameter name="filter_rows_fdr" label="Filter Output Rows by FDR">
			<options>
				<option label="Yes" value="1" />
				<option label="No" value="0" />
			</options>
			<default value="0" />
			<validator type="set" />
		</parameter>

		<parameter name="main_fdr" label="FDR for HPP proteins">
			<options>
				<option label="Common HPP" value="common_hpp" />
				<option label="Picked HPP" value="picked_hpp" />
				<option label="Traditional" value="traditional" />
			</options>
			<default value="common_hpp" />
			<validator type="set" />
		</parameter>

		<parameter name="leftover_fdr" label="FDR for leftover proteins (if using non-traditional FDR for HPP stage)">
			<options>
				<option label="Common" value="common_leftover" />
				<option label="Picked" value="picked_leftover" />
			</options>
			<default value="picked_leftover" />
			<validator type="set" />
		</parameter>

		<parameter name="parallel_cosine.parallel_cosine" label="Parallelism (For Cosine Calculations)">
			<default value="10"/>
			<validator type="integer"/>
		</parameter>

		<parameter name="parallel_mapping.parallel_mapping" label="Parallelism (For Mapping)">
			<default value="10"/>
			<validator type="integer"/>
		</parameter>

		<parameter name="snr" label="Mininum SNR">
			<default value="2"/>
			<validator type="integer"/>
		</parameter>

		<parameter name="min_mz" label="Minimum m/z">
			<default value="232"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="export_psms" label="Export PSMs">
			<options>
				<option label="Yes" value="1" />
				<option label="No" value="0" />
			</options>
			<default value="1" />
			<validator type="set" />
		</parameter>

		<parameter name="peptide_coverage_merged_external" label="Coverage (External)">
			<fileGenerator type="upload" purpose="peptide_coverage_merged_external" target="peptide_coverage_merged_external"/>
		</parameter>

		<parameter name="novel_psms_w_cosine_external" label="PSMs (External)">
			<fileGenerator type="upload" purpose="novel_psms_w_cosine_external" target="novel_psms_w_cosine_external"/>
		</parameter>

		<parameter name="peptide_coverage_comparisons" label="Comparison">
			<fileGenerator type="upload" purpose="peptide_coverage_comparisons" target="peptide_coverage_comparisons"/>
		</parameter>

		<parameter name="dna" label="DNA Folder">
			<fileGenerator type="upload" purpose="dna" target="dna"/>
		</parameter>

		<parameter name="gff" label="GFF File">
			<fileGenerator type="upload" purpose="gff" target="gff"/>
		</parameter>


		<parameter name="export_explorers" label="Export Explorer Tables">
			<options>
				<option label="Yes" value="1" />
				<option label="No" value="0" />
			</options>
			<default value="0" />
			<validator type="set" />
		</parameter>

		<parameter name="library_name" label="Library Name">
			<options>
				<option label="MassIVE-KB (combined)" value="1" />
							<option label="MassIVE-KB (in vivo)" value="2" />
							<option label="MassIVE-KB (synthetic)" value="3" />
							<option label="Blood-KB" value="6" />
			</options>
			<default value="1" />
			<validator type="set" />
		</parameter>

		<parameter name="library_version" label="Library Version">
			<validator type="integer"/>
		</parameter>

		<parameter name="external_provenance" label="Unprocessed Provenance">
			<fileGenerator type="upload" purpose="external_provenance" target="external_provenance"/>
		</parameter>

		<parameter name="mztab_score_select" label="mzTab PSM Score Column">
			<options>
				<option label="search_engine_score[1]" value="search_engine_score[1]" />
				<option label="search_engine_score[2]" value="search_engine_score[2]" />
				<option label="search_engine_score[3]" value="search_engine_score[3]" />
				<option label="search_engine_score[4]" value="search_engine_score[4]" />
				<option label="search_engine_score[5]" value="search_engine_score[5]" />
				<option label="other" value="other" />
			</options>
			<default value="search_engine_score[1]" />
			<validator type="set" />
		</parameter>

		<parameter name="mztab_score_input" label="mzTab PSM Score Column - Other">
			<default value=""/>
		</parameter>

		<parameter name="mztab_score_increasing" label="mzTab PSM Score Column Is Increasing">
			<options>
				<option label="Yes, higher values are better scores." value="True" />
				<option label="No, lower values are better scores" value="False" />
			</options>
			<default value="True" />
			<validator type="set" />
		</parameter>

</parameters>

	<!-- Input form layout -->
    <block label="Search Options">
        <row>
            <cell>
                <label>
                    <content parameter="fastadb"/>
                </label>
            </cell>
            <cell colspan="3">
                <module id="fastadb" type="fileSelector">
                    <property name="label">Proteome DB</property>
                </module>
            </cell>
        </row>

		<row>
            <cell>
                <label>
                    <content parameter="mztab"/>
                </label>
            </cell>
            <cell colspan="3">
                <module id="mztab" type="fileSelector">
                    <property name="label">Search mzTab Files</property>
                </module>
            </cell>
        </row>
		<row>
            <cell>
                <label>
                    <content parameter="spec_on_server"/>
                </label>
            </cell>
            <cell colspan="3">
                <module id="spec_on_server" type="fileSelector">
                    <property name="label">Spectrum Files</property>
                </module>
            </cell>
        </row>
				<row>
								<cell>
										<label>
												<content parameter="synthetics"/>
										</label>
								</cell>
								<cell colspan="3">
										<module id="synthetics" type="fileSelector">
												<property name="label">Synthetics (MUST be from Extract Peaks PyPKL Workflow)</property>
										</module>
								</cell>
						</row>
				<row>
		            <cell>
		                <label>
		                    <content parameter="peak_tolerance"/>
		                </label>
		            </cell>
		            <cell colspan="3">
		                <input type="text" parameter="peak_tolerance"/>
		            </cell>
															<cell>
												<label>
														<content parameter="snr"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="snr"/>
										</cell>			
										<cell>
												<label>
														<content parameter="min_mz"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="min_mz"/>
										</cell>
					</row>
					<row>
							<cell>
									<label>
											<content parameter="cosine_threshold"/>
									</label>
								</cell>
								<cell colspan="3">
										<input type="text" parameter="cosine_threshold"/>
								</cell>
								<cell>
										<label>
												<content parameter="explained_intensity_threshold"/>
										</label>
								</cell>
								<cell colspan="3">
										<input type="text" parameter="explained_intensity_threshold"/>
								</cell>
																		<cell>
												<label>
														<content parameter="annotated_ions_threshold"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="annotated_ions_threshold"/>
										</cell>
		        </row>
						<row>
										<cell>
												<label>
														<content parameter="precursor_fdr"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="precursor_fdr"/>
										</cell>
										<cell>
												<label>
														<content parameter="hpp_protein_fdr"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="hpp_protein_fdr"/>
										</cell>			
										<cell>
												<label>
														<content parameter="picked_protein_fdr"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="picked_protein_fdr"/>
										</cell>
							
								</row>
									
												<row>
					<cell>
						<label>
							<content parameter="filter_rows_fdr"/>
						</label>
					</cell>
					<cell colspan="3">
						<input type="select" parameter="filter_rows_fdr"/>
					</cell>
					<cell>
						<label>
							<content parameter="main_fdr"/>
						</label>
					</cell>
					<cell colspan="3">
						<input type="select" parameter="main_fdr"/>
					</cell>
					<cell>
						<label>
							<content parameter="leftover_fdr"/>
						</label>
					</cell>
					<cell colspan="3">
						<input type="select" parameter="leftover_fdr"/>
					</cell>
				</row>

	</block>
	<block label="Comparison">
		<row>
						<cell>
								<label>
										<content parameter="peptide_coverage_comparisons"/>
								</label>
						</cell>
						<cell colspan="3">
								<module id="peptide_coverage_comparisons" type="fileSelector">
										<property name="label">peptide_coverage_comparisons</property>
								</module>
						</cell>
																<cell>
												<label>
														<content parameter="hpp_protein_fdr_comparison"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="hpp_protein_fdr_comparison"/>
										</cell>			
										<cell>
												<label>
														<content parameter="picked_protein_fdr_comparison"/>
												</label>
										</cell>
										<cell colspan="3">
												<input type="text" parameter="picked_protein_fdr_comparison"/>
										</cell>
				</row>

	</block>
	<block label="Advanced mzTab Input Options">
		<row>
			<cell>
				<label>
				<content parameter="mztab_score_select"/>
				</label>
			</cell>
			<cell colspan="2">
				<input type="select" parameter="mztab_score_select"/>
			</cell>
			<cell>
				<label>
				<content parameter="mztab_score_input"/>
				</label>
			</cell>
			<cell colspan="2">
				<input type="text" parameter="mztab_score_input"/>
			</cell>
		</row>
		<row>
			<cell>
				<label>
				<content parameter="mztab_score_increasing"/>
				</label>
			</cell>
			<cell colspan="2">
				<input type="select" parameter="mztab_score_increasing"/>
			</cell>
		</row>
	</block>
	<block label="Advanced Exon Mapping Options">
		<row>
			<cell>
						<label>
								<content parameter="dna"/>
						</label>
				</cell>
				<cell colspan="3">
						<module id="dna" type="fileSelector">
								<property name="label">DNA Folder</property>
						</module>
				</cell>
		<cell>
						<label>
								<content parameter="gff"/>
						</label>
				</cell>
				<cell colspan="3">
						<module id="gff" type="fileSelector">
								<property name="label">GFF File</property>
						</module>
				</cell>
		</row>
	</block>
	<block label="Advanced Parallelization Options">
    <row>
      <cell>
        <label>
          <content parameter="parallel_cosine.parallel_cosine"/>
        </label>
      </cell>
      <cell colspan="2">
        <input type="text" parameter="parallel_cosine.parallel_cosine"/>
      </cell>
    </row>
		<row>
      <cell>
        <label>
          <content parameter="parallel_mapping.parallel_mapping"/>
        </label>
      </cell>
      <cell colspan="2">
        <input type="text" parameter="parallel_mapping.parallel_mapping"/>
      </cell>
    </row>
  </block>
	<block label="Advanced Combine Jobs">
		<row>
						<cell>
								<label>
										<content parameter="peptide_coverage_merged_external"/>
								</label>
						</cell>
						<cell colspan="3">
								<module id="peptide_coverage_merged_external" type="fileSelector">
										<property name="label">peptide_coverage_merged</property>
								</module>
						</cell>
						<cell>
								<label>
										<content parameter="novel_psms_w_cosine_external"/>
								</label>
						</cell>
						<cell colspan="3">
								<module id="novel_psms_w_cosine_external" type="fileSelector">
										<property name="label">merged_novel_psms_w_cosine</property>
								</module>
						</cell>
				</row>
				<row>
					<cell>
						<label>
							<content parameter="export_psms"/>
						</label>
					</cell>
					<cell colspan="2">
						<input type="select" parameter="export_psms"/>
					</cell>
				</row>
	</block>
	<block label="Advanced Explorer Outputs">
		<row>
			<cell>
				<label>
					<content parameter="export_explorers"/>
				</label>
			</cell>
			<cell colspan="2">
				<input type="select" parameter="export_explorers"/>
			</cell>
		</row>
		<row>
				<cell>
					<label>
						<content parameter="library_name"/>
					</label>
				</cell>
				<cell colspan="2">
					<input type="select" parameter="library_name"/>
				</cell>
				<cell>
					<label>
						<content parameter="library_version"/>
					</label>
				</cell>
				<cell colspan="2">
					<input type="text" parameter="library_version"/>
				</cell>
			</row>
			<row>
						<cell>
								<label>
										<content parameter="external_provenance"/>
								</label>
						</cell>
						<cell colspan="3">
								<module id="external_provenance" type="fileSelector">
										<property name="label">external_provenance</property>
								</module>
						</cell>
				</row>
	</block>
</interface>
