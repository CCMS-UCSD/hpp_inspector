<?xml version="1.0" encoding="ISO-8859-1" ?>
<interface id="peptide_statistics_hpp" version="0.1.0">
	<workflow-id>PEPTIDE_STATISTICS_HPP</workflow-id>
	<workflow-label>Peptide Statistics (HPP Augment)</workflow-label>
	<parameters>
        <parameter name="desc" label="Description">
            <validator type="length" maximum="1000"/>
        </parameter>
        <parameter name="email" label="Email">
            <validator type="email"/>
        </parameter>
        <!-- Search file parameters -->
		<parameter name="fastadb" label="Proteome DB">
			<fileGenerator type="upload" purpose="fasta" target="fastadb"/>
		</parameter>

		<parameter name="mztab" label="Search mzTab Files">
			<fileGenerator type="upload" purpose="mztab" target="mztab"/>
		</parameter>

		<parameter name="synthetics" label="Synthetics">
			<fileGenerator type="upload" purpose="synthetics" target="synthetics"/>
		</parameter>

		<parameter name="spec_on_server" label="Spectrum Files (if not public)">
			<fileGenerator type="upload" purpose="spec_on_server" target="spec_on_server"/>
		</parameter>

		<parameter name="peak_tolerance" label="Peak Tolerance (Da) for Cosine to Synthetics">
			<default value="0.05"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="cosine_threshold" label="Cosine Threshold (Set to 0 to skip cosine calculations)">
			<default value="0.5"/>
			<validator type="float" minimum="0"/>
		</parameter>

		<parameter name="parallel_cosine.parallel_cosine" label="Parallelism (For Cosine Calculations)">
			<default value="10"/>
			<validator type="integer"/>
		</parameter>

</parameters>

	<!-- Input form layout -->
    <block label="Search Options">
        <row>
            <cell>
                <label>
                    <content parameter="fastadb"/>
                </label>
            </cell>
            <cell colspan="3">
                <module id="fastadb" type="fileSelector">
                    <property name="label">Proteome DB</property>
                </module>
            </cell>
        </row>

		<row>
            <cell>
                <label>
                    <content parameter="mztab"/>
                </label>
            </cell>
            <cell colspan="3">
                <module id="mztab" type="fileSelector">
                    <property name="label">Search mzTab Files</property>
                </module>
            </cell>
        </row>
		<row>
            <cell>
                <label>
                    <content parameter="spec_on_server"/>
                </label>
            </cell>
            <cell colspan="3">
                <module id="spec_on_server" type="fileSelector">
                    <property name="label">Spectrum Files</property>
                </module>
            </cell>
        </row>
				<row>
								<cell>
										<label>
												<content parameter="synthetics"/>
										</label>
								</cell>
								<cell colspan="3">
										<module id="synthetics" type="fileSelector">
												<property name="label">Synthetics (MUST be from Extract Peaks PyPKL Workflow)</property>
										</module>
								</cell>
						</row>
				<row>
		            <cell>
		                <label>
		                    <content parameter="peak_tolerance"/>
		                </label>
		            </cell>
		            <cell colspan="3">
		                <input type="text" parameter="peak_tolerance"/>
		            </cell>
								<cell>
										<label>
												<content parameter="cosine_threshold"/>
										</label>
								</cell>
								<cell colspan="3">
										<input type="text" parameter="cosine_threshold"/>
								</cell>
		        </row>
	</block>
	<block label="Advanced Parallelization Options">
    <row>
      <cell>
        <label>
          <content parameter="parallel_cosine.parallel_cosine"/>
        </label>
      </cell>
      <cell colspan="2">
        <input type="text" parameter="parallel_cosine.parallel_cosine"/>
      </cell>
    </row>
  </block>
</interface>
