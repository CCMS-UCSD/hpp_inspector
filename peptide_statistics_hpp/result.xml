<?xml version="1.0" encoding="ISO-8859-1" ?>
<interface id="peptide_statistics_hpp" version="0.1.0">
    <download>
        <source type="folder" name="protein_coverage/"/>
        <source type="folder" name="library_coverage_summary_statistics/"/>
    </download>

    <view id="view_added" label="View Protein Evidence">
        <blockRef id="main" type="view_added"/>
    </view>

    <block id="view_added" type="table_ss">
        <data>
            <source type="file" name="novel_proteins_w_cosine/"/>
            <parsers>
                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
          <!-- <column type="float" field="kb_coverage" label="Coverage (KB Only)" width="2"/>
          <column type="float" field="new_coverage" label="Coverage (Added Only)" width="2"/> -->
            <column type="text" field="protein" label="Protein" width="5"/>
            <column type="integer" field="aa_total" label="Protein Length" width="3"/>
            <column type="integer" field="pe" label="PE" width="2"/>
            <column type="text" field="ms_evidence" label="Proteomics Evidence" width="2"/>
            <column type="expandable" field="supporting_peptides" label="Previously-known Peptides" width="20"/>
            <column type="expandable" field="novel_peptides" label="Novel Peptides" width="20"/>
            <column type="integer" field="combined_hpp" label="#HPP Peptides (Combined)" width="5"/>
            <column type="integer" field="kb_hpp" label="#HPP Peptides (KB Only)" width="2"/>
            <column type="integer" field="new_hpp" label="#HPP Peptides (Added Only)" width="2"/>
            <column type="float" field="added_kb_coverage" label="Coverage (Added)" width="2"/>
            <!-- <column type="text" field="promoted" label="Evidence to Promote" width="2"/> -->
            <column type="expandable" field="supporting_peptides_w_synthetic" label="Previously-known Peptides (Synthetic)" width="20"/>
            <column type="expandable" field="novel_peptides_w_synthetic" label="Novel Peptides (Synthetic)" width="20"/>
            <column type="integer" field="combined_hpp_w_synthetic" label="#HPP Peptides (Combined) (Synthetic)" width="5"/>
            <column type="integer" field="kb_hpp_w_synthetic" label="#HPP Peptides (KB Only) (Synthetic)" width="2"/>
            <column type="integer" field="new_hpp_w_synthetic" label="#HPP Peptides (Added Only) (Synthetic)" width="2"/>
            <column type="float" field="added_kb_coverage_w_synthetic" label="Coverage (Added) (Synthetic)" width="2"/>
            <!-- <column type="text" field="promoted_w_synthetic" label="Evidence to Promote (Synthetic)" width="2"/> -->
            <column type="expandable" field="supporting_peptides_w_synthetic_cosine" label="Previously-known Peptides (Synthetic + Pass Cosine Threshold)" width="20"/>
            <column type="expandable" field="novel_peptides_w_synthetic_cosine" label="Novel Peptides (Synthetic + Pass Cosine Threshold)" width="20"/>
            <column type="integer" field="combined_hpp_w_synthetic_cosine" label="#HPP Peptides (Combined) (Synthetic + Pass Cosine Threshold)" width="5"/>
            <column type="integer" field="kb_hpp_w_synthetic_cosine" label="#HPP Peptides (KB Only) (Synthetic + Pass Cosine Threshold)" width="2"/>
            <column type="integer" field="new_hpp_w_synthetic_cosine" label="#HPP Peptides (Added Only) (Synthetic + Pass Cosine Threshold)" width="2"/>
            <column type="float" field="added_kb_coverage_w_synthetic_cosine" label="Coverage (Added) (Synthetic + Pass Cosine Threshold)" width="2"/>
            <!-- <column type="text" field="promoted_w_synthetic_cosine" label="Evidence to Promote (Synthetic + Pass Cosine Threshold)" width="2"/> -->
        </row>
    </block>

    <view id="view_added_psm" label="View PSM Evidence">
        <blockRef id="main" type="view_added_psm"/>
    </view>

    <view id="view_added_peptides" label="View Peptide Evidence">
        <blockRef id="main" type="view_added_peptides"/>
    </view>

    <block id="view_added_psm" type="table_ss">
        <data>
            <source type="file" name="merged_novel_psms_w_cosine/"/>
            <parsers>
                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
            <column type="text" field="protein" label="Protein" width="4"/>
            <column type="integer" field="pe" label="PE" width="5"/>
            <!-- <column type="text" field="ms_evidence" label="Proteomics Evidence" width="2"/> -->
            <column type="text" field="usi" label="USI" width="20"/>
            <!-- <column type="text" field="filename" label="Filename" width="20"/>
            <column type="integer" field="scan" label="Scan" width="4"/>
            <column type="text" field="sequence" label="Sequence" width="20"/> -->
            <column type="float" field="score" label="-log10(EValue)" width="6"/>
            <column type="text" field="pass" label="Above Library Threshold" width="6"/>
            <column type="text" field="parent_mass" label="Parent Mass" width="20"/>
            <column type="integer" field="charge" label="Charge" width="4"/>
            <column type="text" field="type" label="Evidence Type" width="6"/>
            <column type="text" field="synthetic_usi" label="Synthetic Match" width="20"/>
            <!-- <column type="text" field="synthetic_filename" label="Synthetic Filename" width="20"/>
            <column type="integer" field="synthetic_scan" label="Synthetic Scan" width="4"/> -->
            <column type="float" field="cosine" label="Best Cosine to Synthetic" width="6"/>
            <column label="Add to Library" type="genericurlgenerator" width="12">
                <parameter name="URLBASE" value="/ProteoSAFe/addToLibrary.jsp"/>
                <parameter name="REQUESTPARAMETER=file" value="[filename]"/>
                <parameter name="REQUESTPARAMETER=scan" value="[scan]"/>
                <!--<parameter name="REQUESTPARAMETER=index" value=""/>\-->
                <parameter name="REQUESTPARAMETER=charge" value="[charge]"/>
                <parameter name="REQUESTPARAMETER=mass" value="[parent_mass]"/>
                <parameter name="REQUESTPARAMETER=proteins" value="[protein]"/>
                <parameter name="REQUESTPARAMETER=peptide" value="[sequence]"/>
                <parameter name="LABEL" value="Link"/>\
                <parameter name="USETASK" value="True"/>\
                <parameter name="PASS_URL" value="True"/>\
            </column>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer" label="Input PSM" colspan="6">
                <parameter name="file"          file="[filename]"/>
                <parameter name="scan"          value="[scan]"/>
                <parameter name="peptide"       value="[sequence]"/>
                <parameter name="modformat"     value="inspect"/>
            </column>
            <column type="jscolumnspectrumviewer"  label="Best Matching Synthetic PSM" colspan="6">
                <parameter name="file"          file="[synthetic_filename]"/>
                <parameter name="scan"          value="[synthetic_scan]"/>
                <parameter name="peptide"       value="[sequence]"/>
                <parameter name="modformat"     value="inspect"/>
            </column>
        </row>
    </block>

        <block id="view_added_peptides" type="table_ss">
            <data>
                <source type="file" name="novel_peptides_w_cosine/"/>
                <parsers>
                    <parser type="SQLite"/>
                </parsers>
            </data>
            <row>
                <column type="text" field="protein" label="Protein" width="4"/>
                <column type="integer" field="pe" label="PE" width="5"/>
                <column type="text" field="ms_evidence" label="Proteomics Evidence" width="2"/>
                <column type="text" field="sequence" label="Sequence" width="20"/>
                <column type="text" field="parent_mass" label="Parent Mass" width="20"/>
                <column type="integer" field="charge" label="Charge" width="4"/>
                <!-- <column type="text" field="type" label="Evidence Type" width="6"/> -->
                <column type="float" field="score" label="-log10(EValue)" width="6"/>
                <!-- <column type="text" field="pass" label="Above Library Threshold" width="6"/> -->
                <column type="float" field="cosine" label="Best Cosine to Synthetic" width="6"/>
                <column label="Add to Library" type="genericurlgenerator" width="12">
                    <parameter name="URLBASE" value="/ProteoSAFe/addToLibrary.jsp"/>
                    <parameter name="REQUESTPARAMETER=file" value="[filename]"/>
                    <parameter name="REQUESTPARAMETER=scan" value="[scan]"/>
                    <!--<parameter name="REQUESTPARAMETER=index" value=""/>\-->
                    <parameter name="REQUESTPARAMETER=charge" value="[charge]"/>
                    <parameter name="REQUESTPARAMETER=mass" value="[parent_mass]"/>
                    <parameter name="REQUESTPARAMETER=proteins" value="[protein]"/>
                    <parameter name="REQUESTPARAMETER=peptide" value="[sequence]"/>
                    <parameter name="LABEL" value="Link"/>\
                    <parameter name="USETASK" value="True"/>\
                    <parameter name="PASS_URL" value="True"/>\
                </column>
                <column type="text" field="database_usi" label="Best DB Match" width="20"/>
                <column type="text" field="cosine_usi" label="Best Cosine Match" width="20"/>
                <column type="text" field="synthetic_usi" label="Synthetic Match" width="20"/>
                <!-- <column type="text" field="database_filename" label="Best DB Filename" width="20"/>
                <column type="integer" field="database_scan" label="Best DB Scan" width="4"/>
                <column type="text" field="cosine_filename" label="Best Cosine Filename" width="20"/>
                <column type="integer" field="cosine_scan" label="Best Cosine Scan" width="4"/>
                <column type="text" field="synthetic_filename" label="Synthetic Filename" width="20"/>
                <column type="integer" field="synthetic_scan" label="Synthetic Scan" width="4"/> -->
            </row>
            <row expander="image">
                <column type="jscolumnspectrumviewer"  label="Best PSM By Database Score" colspan="6">
                    <parameter name="file"          file="[database_filename]"/>
                    <parameter name="scan"          value="[database_scan]"/>
                    <parameter name="peptide"       value="[sequence]"/>
                    <parameter name="modformat"     value="inspect"/>
                </column>
                <column type="jscolumnspectrumviewer" label="Best PSM By Cosine to Synthetic" colspan="6">
                    <parameter name="file"          file="[cosine_filename]"/>
                    <parameter name="scan"          value="[cosine_scan]"/>
                    <parameter name="peptide"       value="[sequence]"/>
                    <parameter name="modformat"     value="inspect"/>
                </column>
                <column type="jscolumnspectrumviewer" label="Best Matched Synthetic" colspan="6">
                    <parameter name="file"          file="[synthetic_filename]"/>
                    <parameter name="scan"          value="[synthetic_scan]"/>
                    <parameter name="peptide"       value="[sequence]"/>
                    <parameter name="modformat"     value="inspect"/>
                </column>
            </row>
        </block>
</interface>
